<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>data_processing/heatmap/classification &mdash; FarmVibes.AI  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/custom.css?v=85179c66" />

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js?v=b3ba4146"></script>
        <script src="../../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            FarmVibes.AI
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guides &amp; Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../QUICKSTART.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../AKS.html">Remote Cluster User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CLIENT.html">FarmVibes.AI Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../WORKFLOWS.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../NOTEBOOK_LIST.html">Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../REST_API.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CACHE.html">Data Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SECRETS.html">Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../TROUBLESHOOTING.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/client.html">FarmVibes.AI Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_data/index_data_types.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../WORKFLOW_LIST.html">Workflow List</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/admag_client.html">Azure Data Manager for Agriculture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/datamodel.html">Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/filedownloader.html">File Downloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/fileutils.html">File Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/logconfig.html">Logconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/monitor.html">Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/uri.html">URI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/vibe_core_client/additional_modules/utils.html">Utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">FarmVibes.AI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">data_processing/heatmap/classification</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/docfiles/markdown/workflow_yaml/data_processing/heatmap/classification.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-processing-heatmap-classification">
<h1>data_processing/heatmap/classification<a class="headerlink" href="#data-processing-heatmap-classification" title="Permalink to this heading"></a></h1>
<p>Utilizes input Sentinel-2 satellite imagery &amp; the sensor samples as labeled data that contain nutrient information (Nitrogen, Carbon, pH, Phosphorus) to train a model using Random Forest classifier. The inference operation predicts nutrients in soil for the chosen farm boundary.
The workflow generates a heatmap for selected nutrient. It relies on sample soil data that
contain information of nutrients. The quantity of samples define the accuracy of the heat map
generation. During the research performed testing with samples spaced at 200 feet, 100 feet and
50 feet. The 50 feet sample spaced distance provided results matching to the ground truth.
Generating heatmaps with this approach reduces the number of samples. It utilizes the logic
below behind the scenes to generate heatmap.</p>
<ul class="simple">
<li><p>Read the sentinel raster provided.</p></li>
<li><p>Sensor samples needs to be uploaded into prescriptions entity in Azure
data manager for Agriculture (ADMAg). ADMAg is having hierarchy to hold
information of Party, Field, Seasons, Crop etc. Prior to
uploading prescriptions, it is required to build hierarchy and
a <code class="docutils literal notranslate"><span class="pre">prescription_map_id</span></code>. All prescriptions uploaded to ADMAg are
related to farm hierarchy through <code class="docutils literal notranslate"><span class="pre">prescription_map_id</span></code>. Please refer to
https://learn.microsoft.com/en-us/rest/api/data-manager-for-agri/ for
more information on ADMAg.</p></li>
<li><p>Compute indices using the spyndex python package.</p></li>
<li><p>Clip the satellite imagery &amp; sensor samples using farm boundary.</p></li>
<li><p>Perform spatial interpolation to find raster pixels within the offset distance
from sample location and assign the value of nutrients to group of pixels.</p></li>
<li><p>Classify the data based on number of bins.</p></li>
<li><p>Train the model using Random Forest classifier.</p></li>
<li><p>Predict the nutrients using the satellite imagery.</p></li>
<li><p>Generate a shape file using the predicted outputs.</p></li>
</ul>
<div class="mermaid">
                graph TD
    inp1&gt;input_raster]
    inp2&gt;samples]
    out1&gt;result]
    tsk1{{compute_index}}
    tsk2{{soil_sample_heatmap}}
    tsk1{{compute_index}} -- index_raster/raster --&gt; tsk2{{soil_sample_heatmap}}
    inp1&gt;input_raster] -- raster --&gt; tsk1{{compute_index}}
    inp2&gt;samples] -- samples --&gt; tsk2{{soil_sample_heatmap}}
    tsk2{{soil_sample_heatmap}} -- result --&gt; out1&gt;result]
        </div><section id="sources">
<h2>Sources<a class="headerlink" href="#sources" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>input_raster</strong>: Input raster for index computation.</p></li>
<li><p><strong>samples</strong>: External references to sensor samples for nutrients.</p></li>
</ul>
</section>
<section id="sinks">
<h2>Sinks<a class="headerlink" href="#sinks" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>result</strong>: Zip file containing cluster geometries.</p></li>
</ul>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>attribute_name</strong>: Nutrient property name in sensor samples geojson file. For example CARBON (C), Nitrogen (N), Phosphorus (P) etc.,</p></li>
<li><p><strong>buffer</strong>: Offset distance from sample to perform interpolate operations with raster.</p></li>
<li><p><strong>index</strong>: Type of index to be used to generate heatmap. For example - evi, pri etc.,</p></li>
<li><p><strong>bins</strong>: Possible number of groups used to move value to nearest group using <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram.html">numpy histogram</a> and to pre-process the data to support model training with classification .</p></li>
<li><p><strong>simplify</strong>: Replace small polygons in input with value of their largest neighbor after converting from raster to vector. Accepts ‘simplify’ or ‘convex’ or ‘none’.</p></li>
<li><p><strong>tolerance</strong>: All parts of a <a class="reference external" href="https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoSeries.simplify.html">simplified geometry</a> will be no more than tolerance distance from the original. It has the same units as the coordinate reference system of the GeoSeries. For example, using tolerance=100 in a projected CRS with meters as units means a distance of 100 meters in reality.</p></li>
<li><p><strong>data_scale</strong>: Accepts True or False. Default is False. On True, it scale data using [StandardScalar] (https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html) from scikit-learn package.  It Standardize features by removing the mean and scaling to unit variance.</p></li>
<li><p><strong>max_depth</strong>: The maximum depth of the tree. If None, then nodes are expanded until all leaves are pure or until all leaves contain less than min_samples_split samples. For more details refer to (https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html)</p></li>
<li><p><strong>n_estimators</strong>: The number of trees in the forest. For more details refer to (https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html)</p></li>
<li><p><strong>random_state</strong>: Controls both the randomness of the bootstrapping of the samples used when building trees (if bootstrap=True) and the sampling of the features to consider when looking for the best split at each node (if max_features &lt; n_features). For more details refer to (https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html)</p></li>
</ul>
</section>
<section id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>compute_index</strong>: Computes an index from the bands of an input raster.</p></li>
<li><p><strong>soil_sample_heatmap</strong>: Generate heatmap for nutrients using satellite or spaceEye imagery.</p></li>
</ul>
</section>
<section id="workflow-yaml">
<h2>Workflow Yaml<a class="headerlink" href="#workflow-yaml" title="Permalink to this heading"></a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">heatmap_intermediate</span>
<span class="nt">sources</span><span class="p">:</span>
<span class="w">  </span><span class="nt">input_raster</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute_index.raster</span>
<span class="w">  </span><span class="nt">samples</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">soil_sample_heatmap.samples</span>
<span class="nt">sinks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">soil_sample_heatmap.result</span>
<span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">attribute_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">buffer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">simplify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">data_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">max_depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">n_estimators</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">random_state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">tasks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">compute_index</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workflow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_processing/index/index</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(index)&#39;</span>
<span class="w">  </span><span class="nt">soil_sample_heatmap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">soil_sample_heatmap_using_classification</span>
<span class="w">    </span><span class="nt">op_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">heatmap_sensor</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">attribute_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(attribute_name)&#39;</span>
<span class="w">      </span><span class="nt">buffer</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(buffer)&#39;</span>
<span class="w">      </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(bins)&#39;</span>
<span class="w">      </span><span class="nt">simplify</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(simplify)&#39;</span>
<span class="w">      </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(tolerance)&#39;</span>
<span class="w">      </span><span class="nt">data_scale</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(data_scale)&#39;</span>
<span class="w">      </span><span class="nt">max_depth</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(max_depth)&#39;</span>
<span class="w">      </span><span class="nt">n_estimators</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(n_estimators)&#39;</span>
<span class="w">      </span><span class="nt">random_state</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;@from(random_state)&#39;</span>
<span class="nt">edges</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">origin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute_index.index_raster</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">soil_sample_heatmap.raster</span>
<span class="nt">description</span><span class="p">:</span>
<span class="w">  </span><span class="nt">short_description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Utilizes</span><span class="nv"> </span><span class="s">input</span><span class="nv"> </span><span class="s">Sentinel-2</span><span class="nv"> </span><span class="s">satellite</span><span class="nv"> </span><span class="s">imagery</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sensor</span><span class="nv"> </span><span class="s">samples</span>
<span class="w">    </span><span class="s">as</span><span class="nv"> </span><span class="s">labeled</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">contain</span><span class="nv"> </span><span class="s">nutrient</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">(Nitrogen,</span><span class="nv"> </span><span class="s">Carbon,</span><span class="nv"> </span><span class="s">pH,</span><span class="nv"> </span><span class="s">Phosphorus)</span>
<span class="w">    </span><span class="s">to</span><span class="nv"> </span><span class="s">train</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">model</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">Random</span><span class="nv"> </span><span class="s">Forest</span><span class="nv"> </span><span class="s">classifier.</span><span class="nv"> </span><span class="s">The</span><span class="nv"> </span><span class="s">inference</span><span class="nv"> </span><span class="s">operation</span><span class="nv"> </span><span class="s">predicts</span>
<span class="w">    </span><span class="s">nutrients</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">soil</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">chosen</span><span class="nv"> </span><span class="s">farm</span><span class="nv"> </span><span class="s">boundary.</span>

<span class="w">    </span><span class="s">&#39;</span>
<span class="w">  </span><span class="nt">long_description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">workflow</span><span class="nv"> </span><span class="s">generates</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">heatmap</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">selected</span><span class="nv"> </span><span class="s">nutrient.</span><span class="nv"> </span><span class="s">It</span><span class="nv"> </span><span class="s">relies\</span>
<span class="w">    </span><span class="s">\ on</span><span class="nv"> </span><span class="s">sample</span><span class="nv"> </span><span class="s">soil</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">that\ncontain</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">nutrients.</span><span class="nv"> </span><span class="s">The</span><span class="nv"> </span><span class="s">quantity</span><span class="nv"> </span><span class="s">of\</span>
<span class="w">    </span><span class="s">\ samples</span><span class="nv"> </span><span class="s">define</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">accuracy</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">heat</span><span class="nv"> </span><span class="s">map\ngeneration.</span><span class="nv"> </span><span class="s">During</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">research\</span>
<span class="w">    </span><span class="s">\ performed</span><span class="nv"> </span><span class="s">testing</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">samples</span><span class="nv"> </span><span class="s">spaced</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">200</span><span class="nv"> </span><span class="s">feet,</span><span class="nv"> </span><span class="s">100</span><span class="nv"> </span><span class="s">feet</span><span class="nv"> </span><span class="s">and\n50</span><span class="nv"> </span><span class="s">feet.</span><span class="nv"> </span><span class="s">The\</span>
<span class="w">    </span><span class="s">\ 50</span><span class="nv"> </span><span class="s">feet</span><span class="nv"> </span><span class="s">sample</span><span class="nv"> </span><span class="s">spaced</span><span class="nv"> </span><span class="s">distance</span><span class="nv"> </span><span class="s">provided</span><span class="nv"> </span><span class="s">results</span><span class="nv"> </span><span class="s">matching</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">ground</span><span class="nv"> </span><span class="s">truth.\n\</span>
<span class="w">    </span><span class="s">Generating</span><span class="nv"> </span><span class="s">heatmaps</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">approach</span><span class="nv"> </span><span class="s">reduces</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">samples.</span><span class="nv"> </span><span class="s">It</span><span class="nv"> </span><span class="s">utilizes\</span>
<span class="w">    </span><span class="s">\ the</span><span class="nv"> </span><span class="s">logic\nbelow</span><span class="nv"> </span><span class="s">behind</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">scenes</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">generate</span><span class="nv"> </span><span class="s">heatmap.\n</span><span class="nv">  </span><span class="s">-</span><span class="nv"> </span><span class="s">Read</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sentinel\</span>
<span class="w">    </span><span class="s">\ raster</span><span class="nv"> </span><span class="s">provided.\n</span><span class="nv">  </span><span class="s">-</span><span class="nv"> </span><span class="s">Sensor</span><span class="nv"> </span><span class="s">samples</span><span class="nv"> </span><span class="s">needs</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">uploaded</span><span class="nv"> </span><span class="s">into</span><span class="nv"> </span><span class="s">prescriptions\</span>
<span class="w">    </span><span class="s">\ entity</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">Azure\n</span><span class="nv">    </span><span class="s">data</span><span class="nv"> </span><span class="s">manager</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">Agriculture</span><span class="nv"> </span><span class="s">(ADMAg).</span><span class="nv"> </span><span class="s">ADMAg</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">having</span><span class="nv"> </span><span class="s">hierarchy\</span>
<span class="w">    </span><span class="s">\ to</span><span class="nv"> </span><span class="s">hold\n</span><span class="nv">    </span><span class="s">information</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">Party,</span><span class="nv"> </span><span class="s">Field,</span><span class="nv"> </span><span class="s">Seasons,</span><span class="nv"> </span><span class="s">Crop</span><span class="nv"> </span><span class="s">etc.</span><span class="nv"> </span><span class="s">Prior</span><span class="nv"> </span><span class="s">to\n</span><span class="nv">    </span><span class="s">uploading\</span>
<span class="w">    </span><span class="s">\ prescriptions,</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">required</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">build</span><span class="nv"> </span><span class="s">hierarchy</span><span class="nv"> </span><span class="s">and\n</span><span class="nv">    </span><span class="s">a</span><span class="nv"> </span><span class="s">`prescription_map_id`.\</span>
<span class="w">    </span><span class="s">\ All</span><span class="nv"> </span><span class="s">prescriptions</span><span class="nv"> </span><span class="s">uploaded</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ADMAg</span><span class="nv"> </span><span class="s">are\n</span><span class="nv">    </span><span class="s">related</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">farm</span><span class="nv"> </span><span class="s">hierarchy</span><span class="nv"> </span><span class="s">through\</span>
<span class="w">    </span><span class="s">\ `prescription_map_id`.</span><span class="nv"> </span><span class="s">Please</span><span class="nv"> </span><span class="s">refer</span><span class="nv"> </span><span class="s">to\n</span><span class="nv">    </span><span class="s">https://learn.microsoft.com/en-us/rest/api/data-manager-for-agri/\</span>
<span class="w">    </span><span class="s">\ for\n</span><span class="nv">    </span><span class="s">more</span><span class="nv"> </span><span class="s">information</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">ADMAg.\n</span><span class="nv">  </span><span class="s">-</span><span class="nv"> </span><span class="s">Compute</span><span class="nv"> </span><span class="s">indices</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">spyndex</span><span class="nv"> </span><span class="s">python\</span>
<span class="w">    </span><span class="s">\ package.\n</span><span class="nv">  </span><span class="s">-</span><span class="nv"> </span><span class="s">Clip</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">satellite</span><span class="nv"> </span><span class="s">imagery</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">sensor</span><span class="nv"> </span><span class="s">samples</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">farm</span><span class="nv"> </span><span class="s">boundary.\n\</span>
<span class="w">    </span><span class="s">\ </span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">Perform</span><span class="nv"> </span><span class="s">spatial</span><span class="nv"> </span><span class="s">interpolation</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">find</span><span class="nv"> </span><span class="s">raster</span><span class="nv"> </span><span class="s">pixels</span><span class="nv"> </span><span class="s">within</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">offset</span><span class="nv"> </span><span class="s">distance\n\</span>
<span class="w">    </span><span class="s">\ </span><span class="nv">   </span><span class="s">from</span><span class="nv"> </span><span class="s">sample</span><span class="nv"> </span><span class="s">location</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">assign</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">nutrients</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">group</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">pixels.\n\</span>
<span class="w">    </span><span class="s">\ </span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">Classify</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">based</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">bins.\n</span><span class="nv">  </span><span class="s">-</span><span class="nv"> </span><span class="s">Train</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">model</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">Random\</span>
<span class="w">    </span><span class="s">\ Forest</span><span class="nv"> </span><span class="s">classifier.\n</span><span class="nv">  </span><span class="s">-</span><span class="nv"> </span><span class="s">Predict</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">nutrients</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">satellite</span><span class="nv"> </span><span class="s">imagery.\n\</span>
<span class="w">    </span><span class="s">\ </span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">Generate</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">shape</span><span class="nv"> </span><span class="s">file</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">predicted</span><span class="nv"> </span><span class="s">outputs.&quot;</span>
<span class="w">  </span><span class="nt">sources</span><span class="p">:</span>
<span class="w">    </span><span class="nt">input_raster</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Input raster for index computation.</span>
<span class="w">    </span><span class="nt">samples</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">External references to sensor samples for nutrients.</span>
<span class="w">  </span><span class="nt">sinks</span><span class="p">:</span>
<span class="w">    </span><span class="nt">result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Zip file containing cluster geometries.</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">attribute_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Nutrient property name in sensor samples geojson file. For example</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">CARBON (C), Nitrogen (N), Phosphorus (P) etc.,</span>
<span class="w">    </span><span class="nt">buffer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Offset distance from sample to perform interpolate operations with raster.</span>
<span class="w">    </span><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Type of index to be used to generate heatmap. For example - evi, pri etc.,</span>
<span class="w">    </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Possible number of groups used to move value to nearest group using [numpy</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">histogram](https://numpy.org/doc/stable/reference/generated/numpy.histogram.html)</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">and to pre-process the data to support model training with classification .</span>
<span class="w">    </span><span class="nt">simplify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Replace small polygons in input with value of their largest neighbor</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">after converting from raster to vector. Accepts &#39;simplify&#39; or &#39;convex&#39; or &#39;none&#39;.</span>
<span class="w">    </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">All parts of a [simplified geometry](https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoSeries.simplify.html)</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">will be no more than tolerance distance from the original. It has the same units</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">as the coordinate reference system of the GeoSeries. For example, using tolerance=100</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">in a projected CRS with meters as units means a distance of 100 meters in reality.</span>
<span class="w">    </span><span class="nt">data_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Accepts True or False. Default is False. On True, it scale data using</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">[StandardScalar] (https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html)</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">from scikit-learn package.  It Standardize features by removing the mean and</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">scaling to unit variance.</span>
<span class="w">    </span><span class="nt">max_depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The maximum depth of the tree. If None, then nodes are expanded until</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">all leaves are pure or until all leaves contain less than min_samples_split</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">samples. For more details refer to (https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html)</span>
<span class="w">    </span><span class="nt">n_estimators</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The number of trees in the forest. For more details refer to (https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html)</span>
<span class="w">    </span><span class="nt">random_state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Controls both the randomness of the bootstrapping of the samples</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">used when building trees (if bootstrap=True) and the sampling of the features</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">to consider when looking for the best split at each node (if max_features &lt;</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">n_features). For more details refer to (https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Microsoft.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>